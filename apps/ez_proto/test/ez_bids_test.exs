defmodule EZ.Proto.BiDS.Test do
  use ExUnit.Case
  require Logger
  alias EZ.BiDS, as: BiDS

  test "convert_simple" do
    simple = BiDS.make_pkt(:request, :get)
    bin = BiDS.encode(simple)
    {:ok, result} = BiDS.decode(bin)
    assert result == simple
  end

  test "convert_attributes" do
    with_attrs = BiDS.make_pkt(:request, :set,
      [
        bucket: "cache",
        data_type: "json",
        # very long json
        data: "{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"make_parse\",\"arity\":\"name\"},\"second\":{\"value\":\"function\",\"arity\":\"function\",\"first\":[],\"second\":[{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"symbol_table\",\"arity\":\"name\"},\"second\":{\"value\":\"{\",\"arity\":\"unary\",\"first\":[]}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"itself\",\"arity\":\"name\"},\"second\":{\"value\":\"function\",\"arity\":\"function\",\"first\":[],\"second\":{\"value\":\"return\",\"arity\":\"statement\",\"first\":{\"value\":\"this\",\"arity\":\"this\"}}}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"original_scope\",\"arity\":\"name\"},\"second\":{\"value\":\"{\",\"arity\":\"unary\",\"first\":[{\"key\":\"define\",\"value\":\"function\",\"arity\":\"function\",\"first\":[{\"value\":\"n\",\"arity\":\"name\"}],\"second\":[{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"t\",\"arity\":\"name\"},\"second\":{\"value\":\"[\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"def\",\"arity\":\"literal\"}},\"second\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"n\",\"arity\":\"name\"},\"second\":{\"value\":\"value\",\"arity\":\"literal\"}}}},{\"value\":\"if\",\"arity\":\"statement\",\"first\":{\"value\":\"===\",\"arity\":\"binary\",\"first\":{\"value\":\"typeof\",\"arity\":\"unary\",\"first\":{\"value\":\"t\",\"arity\":\"name\"}},\"second\":{\"value\":\"object\",\"arity\":\"literal\"}},\"second\":{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":\"n\",\"arity\":\"name\"},\"second\":{\"value\":\"error\",\"arity\":\"literal\"},\"third\":[{\"value\":\"?\",\"arity\":\"ternary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"t\",\"arity\":\"name\"},\"second\":{\"value\":\"reserved\",\"arity\":\"literal\"}},\"second\":{\"value\":\"Already reserved.\",\"arity\":\"literal\"},\"third\":{\"value\":\"Already defined.\",\"arity\":\"literal\"}}]},\"third\":null},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"[\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"def\",\"arity\":\"literal\"}},\"second\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"n\",\"arity\":\"name\"},\"second\":{\"value\":\"value\",\"arity\":\"literal\"}}},\"second\":{\"value\":\"n\",\"arity\":\"name\"}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"n\",\"arity\":\"name\"},\"second\":{\"value\":\"reserved\",\"arity\":\"literal\"}},\"second\":{\"value\":false,\"arity\":\"literal\"}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"n\",\"arity\":\"name\"},\"second\":{\"value\":\"nud\",\"arity\":\"literal\"}},\"second\":{\"value\":\"itself\",\"arity\":\"name\"}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"n\",\"arity\":\"name\"},\"second\":{\"value\":\"led\",\"arity\":\"literal\"}},\"second\":{\"value\":null,\"arity\":\"literal\"}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"n\",\"arity\":\"name\"},\"second\":{\"value\":\"std\",\"arity\":\"literal\"}},\"second\":{\"value\":null,\"arity\":\"literal\"}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"n\",\"arity\":\"name\"},\"second\":{\"value\":\"lbp\",\"arity\":\"literal\"}},\"second\":{\"value\":0,\"arity\":\"literal\"}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"n\",\"arity\":\"name\"},\"second\":{\"value\":\"scope\",\"arity\":\"literal\"}},\"second\":{\"value\":\"scope\",\"arity\":\"name\"}},{\"value\":\"return\",\"arity\":\"statement\",\"first\":{\"value\":\"n\",\"arity\":\"name\"}}]},{\"key\":\"find\",\"value\":\"function\",\"arity\":\"function\",\"first\":[{\"value\":\"n\",\"arity\":\"name\"}],\"second\":[{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"e\",\"arity\":\"name\"},\"second\":{\"value\":\"this\",\"arity\":\"this\"}},{\"value\":\"while\",\"arity\":\"statement\",\"first\":{\"value\":true,\"arity\":\"literal\"},\"second\":[{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"o\",\"arity\":\"name\"},\"second\":{\"value\":\"[\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"e\",\"arity\":\"name\"},\"second\":{\"value\":\"def\",\"arity\":\"literal\"}},\"second\":{\"value\":\"n\",\"arity\":\"name\"}}},{\"value\":\"if\",\"arity\":\"statement\",\"first\":{\"value\":\"&&\",\"arity\":\"binary\",\"first\":{\"value\":\"o\",\"arity\":\"name\"},\"second\":{\"value\":\"!==\",\"arity\":\"binary\",\"first\":{\"value\":\"typeof\",\"arity\":\"unary\",\"first\":{\"value\":\"o\",\"arity\":\"name\"}},\"second\":{\"value\":\"function\",\"arity\":\"literal\"}}},\"second\":{\"value\":\"return\",\"arity\":\"statement\",\"first\":{\"value\":\"[\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"e\",\"arity\":\"name\"},\"second\":{\"value\":\"def\",\"arity\":\"literal\"}},\"second\":{\"value\":\"n\",\"arity\":\"name\"}}},\"third\":null},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"e\",\"arity\":\"name\"},\"second\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"e\",\"arity\":\"name\"},\"second\":{\"value\":\"parent\",\"arity\":\"literal\"}}},{\"value\":\"if\",\"arity\":\"statement\",\"first\":{\"value\":\"!\",\"arity\":\"unary\",\"first\":{\"value\":\"e\",\"arity\":\"name\"}},\"second\":[{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"o\",\"arity\":\"name\"},\"second\":{\"value\":\"[\",\"arity\":\"binary\",\"first\":{\"value\":\"symbol_table\",\"arity\":\"name\"},\"second\":{\"value\":\"n\",\"arity\":\"name\"}}},{\"value\":\"return\",\"arity\":\"statement\",\"first\":{\"value\":\"?\",\"arity\":\"ternary\",\"first\":{\"value\":\"&&\",\"arity\":\"binary\",\"first\":{\"value\":\"o\",\"arity\":\"name\"},\"second\":{\"value\":\"!==\",\"arity\":\"binary\",\"first\":{\"value\":\"typeof\",\"arity\":\"unary\",\"first\":{\"value\":\"o\",\"arity\":\"name\"}},\"second\":{\"value\":\"function\",\"arity\":\"literal\"}}},\"second\":{\"value\":\"o\",\"arity\":\"name\"},\"third\":{\"value\":\"[\",\"arity\":\"binary\",\"first\":{\"value\":\"symbol_table\",\"arity\":\"name\"},\"second\":{\"value\":\"(name)\",\"arity\":\"literal\"}}}}],\"third\":null}]}]},{\"key\":\"pop\",\"value\":\"function\",\"arity\":\"function\",\"first\":[],\"second\":{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"scope\",\"arity\":\"name\"},\"second\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"parent\",\"arity\":\"literal\"}}}},{\"key\":\"reserve\",\"value\":\"function\",\"arity\":\"function\",\"first\":[{\"value\":\"n\",\"arity\":\"name\"}],\"second\":[{\"value\":\"if\",\"arity\":\"statement\",\"first\":{\"value\":\"||\",\"arity\":\"binary\",\"first\":{\"value\":\"!==\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"n\",\"arity\":\"name\"},\"second\":{\"value\":\"arity\",\"arity\":\"literal\"}},\"second\":{\"value\":\"name\",\"arity\":\"literal\"}},\"second\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"n\",\"arity\":\"name\"},\"second\":{\"value\":\"reserved\",\"arity\":\"literal\"}}},\"second\":{\"value\":\"return\",\"arity\":\"statement\"},\"third\":null},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"t\",\"arity\":\"name\"},\"second\":{\"value\":\"[\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"def\",\"arity\":\"literal\"}},\"second\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"n\",\"arity\":\"name\"},\"second\":{\"value\":\"value\",\"arity\":\"literal\"}}}},{\"value\":\"if\",\"arity\":\"statement\",\"first\":{\"value\":\"t\",\"arity\":\"name\"},\"second\":[{\"value\":\"if\",\"arity\":\"statement\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"t\",\"arity\":\"name\"},\"second\":{\"value\":\"reserved\",\"arity\":\"literal\"}},\"second\":{\"value\":\"return\",\"arity\":\"statement\"},\"third\":null},{\"value\":\"if\",\"arity\":\"statement\",\"first\":{\"value\":\"===\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"t\",\"arity\":\"name\"},\"second\":{\"value\":\"arity\",\"arity\":\"literal\"}},\"second\":{\"value\":\"name\",\"arity\":\"literal\"}},\"second\":{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":\"n\",\"arity\":\"name\"},\"second\":{\"value\":\"error\",\"arity\":\"literal\"},\"third\":[{\"value\":\"Already defined.\",\"arity\":\"literal\"}]},\"third\":null}],\"third\":null},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"[\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"def\",\"arity\":\"literal\"}},\"second\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"n\",\"arity\":\"name\"},\"second\":{\"value\":\"value\",\"arity\":\"literal\"}}},\"second\":{\"value\":\"n\",\"arity\":\"name\"}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"n\",\"arity\":\"name\"},\"second\":{\"value\":\"reserved\",\"arity\":\"literal\"}},\"second\":{\"value\":true,\"arity\":\"literal\"}}]}]}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"new_scope\",\"arity\":\"name\"},\"second\":{\"value\":\"function\",\"arity\":\"function\",\"first\":[],\"second\":[{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"s\",\"arity\":\"name\"},\"second\":{\"value\":\"scope\",\"arity\":\"name\"}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"scope\",\"arity\":\"name\"},\"second\":{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":{},\"arity\":\"literal\"},\"second\":{\"value\":\"create\",\"arity\":\"literal\"},\"third\":[{\"value\":\"original_scope\",\"arity\":\"name\"}]}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"scope\",\"arity\":\"name\"},\"second\":{\"value\":\"def\",\"arity\":\"literal\"}},\"second\":{\"value\":\"{\",\"arity\":\"unary\",\"first\":[]}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"scope\",\"arity\":\"name\"},\"second\":{\"value\":\"parent\",\"arity\":\"literal\"}},\"second\":{\"value\":\"s\",\"arity\":\"name\"}},{\"value\":\"return\",\"arity\":\"statement\",\"first\":{\"value\":\"scope\",\"arity\":\"name\"}}]}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"advance\",\"arity\":\"name\"},\"second\":{\"value\":\"function\",\"arity\":\"function\",\"first\":[{\"value\":\"id\",\"arity\":\"name\"}],\"second\":[{\"value\":\"if\",\"arity\":\"statement\",\"first\":{\"value\":\"&&\",\"arity\":\"binary\",\"first\":{\"value\":\"id\",\"arity\":\"name\"},\"second\":{\"value\":\"!==\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"token\",\"arity\":\"name\"},\"second\":{\"value\":\"id\",\"arity\":\"literal\"}},\"second\":{\"value\":\"id\",\"arity\":\"name\"}}},\"second\":{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":\"token\",\"arity\":\"name\"},\"second\":{\"value\":\"error\",\"arity\":\"literal\"},\"third\":[{\"value\":\"+\",\"arity\":\"binary\",\"first\":{\"value\":\"+\",\"arity\":\"binary\",\"first\":{\"value\":\"Expected '\",\"arity\":\"literal\"},\"second\":{\"value\":\"id\",\"arity\":\"name\"}},\"second\":{\"value\":\"'.\",\"arity\":\"literal\"}}]},\"third\":null},{\"value\":\"if\",\"arity\":\"statement\",\"first\":{\"value\":\">=\",\"arity\":\"binary\",\"first\":{\"value\":\"token_nr\",\"arity\":\"name\"},\"second\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"tokens\",\"arity\":\"name\"},\"second\":{\"value\":\"length\",\"arity\":\"literal\"}}},\"second\":[{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"token\",\"arity\":\"name\"},\"second\":{\"value\":\"[\",\"arity\":\"binary\",\"first\":{\"value\":\"symbol_table\",\"arity\":\"name\"},\"second\":{\"value\":\"(end)\",\"arity\":\"literal\"}}},{\"value\":\"return\",\"arity\":\"statement\"}],\"third\":null},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"t\",\"arity\":\"name\"},\"second\":{\"value\":\"[\",\"arity\":\"binary\",\"first\":{\"value\":\"tokens\",\"arity\":\"name\"},\"second\":{\"value\":\"token_nr\",\"arity\":\"name\"}}},{\"value\":\"+=\",\"arity\":\"binary\",\"first\":{\"value\":\"token_nr\",\"arity\":\"name\"},\"second\":{\"value\":1,\"arity\":\"literal\"}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"v\",\"arity\":\"name\"},\"second\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"t\",\"arity\":\"name\"},\"second\":{\"value\":\"value\",\"arity\":\"literal\"}}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"a\",\"arity\":\"name\"},\"second\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"t\",\"arity\":\"name\"},\"second\":{\"value\":\"type\",\"arity\":\"literal\"}}},{\"value\":\"if\",\"arity\":\"statement\",\"first\":{\"value\":\"===\",\"arity\":\"binary\",\"first\":{\"value\":\"a\",\"arity\":\"name\"},\"second\":{\"value\":\"name\",\"arity\":\"literal\"}},\"second\":{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"o\",\"arity\":\"name\"},\"second\":{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":\"scope\",\"arity\":\"name\"},\"second\":{\"value\":\"find\",\"arity\":\"literal\"},\"third\":[{\"value\":\"v\",\"arity\":\"name\"}]}},\"third\":{\"value\":\"if\",\"arity\":\"statement\",\"first\":{\"value\":\"===\",\"arity\":\"binary\",\"first\":{\"value\":\"a\",\"arity\":\"name\"},\"second\":{\"value\":\"operator\",\"arity\":\"literal\"}},\"second\":[{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"o\",\"arity\":\"name\"},\"second\":{\"value\":\"[\",\"arity\":\"binary\",\"first\":{\"value\":\"symbol_table\",\"arity\":\"name\"},\"second\":{\"value\":\"v\",\"arity\":\"name\"}}},{\"value\":\"if\",\"arity\":\"statement\",\"first\":{\"value\":\"!\",\"arity\":\"unary\",\"first\":{\"value\":\"o\",\"arity\":\"name\"}},\"second\":{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":\"t\",\"arity\":\"name\"},\"second\":{\"value\":\"error\",\"arity\":\"literal\"},\"third\":[{\"value\":\"Unknown operator.\",\"arity\":\"literal\"}]},\"third\":null}],\"third\":{\"value\":\"if\",\"arity\":\"statement\",\"first\":{\"value\":\"||\",\"arity\":\"binary\",\"first\":{\"value\":\"===\",\"arity\":\"binary\",\"first\":{\"value\":\"a\",\"arity\":\"name\"},\"second\":{\"value\":\"string\",\"arity\":\"literal\"}},\"second\":{\"value\":\"===\",\"arity\":\"binary\",\"first\":{\"value\":\"a\",\"arity\":\"name\"},\"second\":{\"value\":\"number\",\"arity\":\"literal\"}}},\"second\":[{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"o\",\"arity\":\"name\"},\"second\":{\"value\":\"[\",\"arity\":\"binary\",\"first\":{\"value\":\"symbol_table\",\"arity\":\"name\"},\"second\":{\"value\":\"(literal)\",\"arity\":\"literal\"}}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"a\",\"arity\":\"name\"},\"second\":{\"value\":\"literal\",\"arity\":\"literal\"}}],\"third\":{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":\"t\",\"arity\":\"name\"},\"second\":{\"value\":\"error\",\"arity\":\"literal\"},\"third\":[{\"value\":\"Unexpected token.\",\"arity\":\"literal\"}]}}}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"token\",\"arity\":\"name\"},\"second\":{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":{},\"arity\":\"literal\"},\"second\":{\"value\":\"create\",\"arity\":\"literal\"},\"third\":[{\"value\":\"o\",\"arity\":\"name\"}]}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"token\",\"arity\":\"name\"},\"second\":{\"value\":\"from\",\"arity\":\"literal\"}},\"second\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"t\",\"arity\":\"name\"},\"second\":{\"value\":\"from\",\"arity\":\"literal\"}}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"token\",\"arity\":\"name\"},\"second\":{\"value\":\"to\",\"arity\":\"literal\"}},\"second\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"t\",\"arity\":\"name\"},\"second\":{\"value\":\"to\",\"arity\":\"literal\"}}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"token\",\"arity\":\"name\"},\"second\":{\"value\":\"value\",\"arity\":\"literal\"}},\"second\":{\"value\":\"v\",\"arity\":\"name\"}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"token\",\"arity\":\"name\"},\"second\":{\"value\":\"arity\",\"arity\":\"literal\"}},\"second\":{\"value\":\"a\",\"arity\":\"name\"}},{\"value\":\"return\",\"arity\":\"statement\",\"first\":{\"value\":\"token\",\"arity\":\"name\"}}]}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"expression\",\"arity\":\"name\"},\"second\":{\"value\":\"function\",\"arity\":\"function\",\"first\":[{\"value\":\"rbp\",\"arity\":\"name\"}],\"second\":[{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"t\",\"arity\":\"name\"},\"second\":{\"value\":\"token\",\"arity\":\"name\"}},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"advance\",\"arity\":\"name\"},\"second\":[]},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"left\",\"arity\":\"name\"},\"second\":{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":\"t\",\"arity\":\"name\"},\"second\":{\"value\":\"nud\",\"arity\":\"literal\"},\"third\":[]}},{\"value\":\"while\",\"arity\":\"statement\",\"first\":{\"value\":\"<\",\"arity\":\"binary\",\"first\":{\"value\":\"rbp\",\"arity\":\"name\"},\"second\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"token\",\"arity\":\"name\"},\"second\":{\"value\":\"lbp\",\"arity\":\"literal\"}}},\"second\":[{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"t\",\"arity\":\"name\"},\"second\":{\"value\":\"token\",\"arity\":\"name\"}},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"advance\",\"arity\":\"name\"},\"second\":[]},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"left\",\"arity\":\"name\"},\"second\":{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":\"t\",\"arity\":\"name\"},\"second\":{\"value\":\"led\",\"arity\":\"literal\"},\"third\":[{\"value\":\"left\",\"arity\":\"name\"}]}}]},{\"value\":\"return\",\"arity\":\"statement\",\"first\":{\"value\":\"left\",\"arity\":\"name\"}}]}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"statement\",\"arity\":\"name\"},\"second\":{\"value\":\"function\",\"arity\":\"function\",\"first\":[],\"second\":[{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"n\",\"arity\":\"name\"},\"second\":{\"value\":\"token\",\"arity\":\"name\"}},{\"value\":\"if\",\"arity\":\"statement\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"n\",\"arity\":\"name\"},\"second\":{\"value\":\"std\",\"arity\":\"literal\"}},\"second\":[{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"advance\",\"arity\":\"name\"},\"second\":[]},{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":\"scope\",\"arity\":\"name\"},\"second\":{\"value\":\"reserve\",\"arity\":\"literal\"},\"third\":[{\"value\":\"n\",\"arity\":\"name\"}]},{\"value\":\"return\",\"arity\":\"statement\",\"first\":{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":\"n\",\"arity\":\"name\"},\"second\":{\"value\":\"std\",\"arity\":\"literal\"},\"third\":[]}}],\"third\":null},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"v\",\"arity\":\"name\"},\"second\":{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"expression\",\"arity\":\"name\"},\"second\":[{\"value\":0,\"arity\":\"literal\"}]}},{\"value\":\"if\",\"arity\":\"statement\",\"first\":{\"value\":\"&&\",\"arity\":\"binary\",\"first\":{\"value\":\"!\",\"arity\":\"unary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"v\",\"arity\":\"name\"},\"second\":{\"value\":\"assignment\",\"arity\":\"literal\"}}},\"second\":{\"value\":\"!==\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"v\",\"arity\":\"name\"},\"second\":{\"value\":\"id\",\"arity\":\"literal\"}},\"second\":{\"value\":\"(\",\"arity\":\"literal\"}}},\"second\":{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":\"v\",\"arity\":\"name\"},\"second\":{\"value\":\"error\",\"arity\":\"literal\"},\"third\":[{\"value\":\"Bad expression statement.\",\"arity\":\"literal\"}]},\"third\":null},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"advance\",\"arity\":\"name\"},\"second\":[{\"value\":\";\",\"arity\":\"literal\"}]},{\"value\":\"return\",\"arity\":\"statement\",\"first\":{\"value\":\"v\",\"arity\":\"name\"}}]}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"statements\",\"arity\":\"name\"},\"second\":{\"value\":\"function\",\"arity\":\"function\",\"first\":[],\"second\":[{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"a\",\"arity\":\"name\"},\"second\":{\"value\":\"[\",\"arity\":\"unary\",\"first\":[]}},{\"value\":\"while\",\"arity\":\"statement\",\"first\":{\"value\":true,\"arity\":\"literal\"},\"second\":[{\"value\":\"if\",\"arity\":\"statement\",\"first\":{\"value\":\"||\",\"arity\":\"binary\",\"first\":{\"value\":\"===\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"token\",\"arity\":\"name\"},\"second\":{\"value\":\"id\",\"arity\":\"literal\"}},\"second\":{\"value\":\"}\",\"arity\":\"literal\"}},\"second\":{\"value\":\"===\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"token\",\"arity\":\"name\"},\"second\":{\"value\":\"id\",\"arity\":\"literal\"}},\"second\":{\"value\":\"(end)\",\"arity\":\"literal\"}}},\"second\":{\"value\":\"break\",\"arity\":\"statement\"},\"third\":null},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"s\",\"arity\":\"name\"},\"second\":{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"statement\",\"arity\":\"name\"},\"second\":[]}},{\"value\":\"if\",\"arity\":\"statement\",\"first\":{\"value\":\"s\",\"arity\":\"name\"},\"second\":{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":\"a\",\"arity\":\"name\"},\"second\":{\"value\":\"push\",\"arity\":\"literal\"},\"third\":[{\"value\":\"s\",\"arity\":\"name\"}]},\"third\":null}]},{\"value\":\"return\",\"arity\":\"statement\",\"first\":{\"value\":\"?\",\"arity\":\"ternary\",\"first\":{\"value\":\"===\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"a\",\"arity\":\"name\"},\"second\":{\"value\":\"length\",\"arity\":\"literal\"}},\"second\":{\"value\":0,\"arity\":\"literal\"}},\"second\":{\"value\":null,\"arity\":\"literal\"},\"third\":{\"value\":\"?\",\"arity\":\"ternary\",\"first\":{\"value\":\"===\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"a\",\"arity\":\"name\"},\"second\":{\"value\":\"length\",\"arity\":\"literal\"}},\"second\":{\"value\":1,\"arity\":\"literal\"}},\"second\":{\"value\":\"[\",\"arity\":\"binary\",\"first\":{\"value\":\"a\",\"arity\":\"name\"},\"second\":{\"value\":0,\"arity\":\"literal\"}},\"third\":{\"value\":\"a\",\"arity\":\"name\"}}}}]}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"block\",\"arity\":\"name\"},\"second\":{\"value\":\"function\",\"arity\":\"function\",\"first\":[],\"second\":[{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"t\",\"arity\":\"name\"},\"second\":{\"value\":\"token\",\"arity\":\"name\"}},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"advance\",\"arity\":\"name\"},\"second\":[{\"value\":\"{\",\"arity\":\"literal\"}]},{\"value\":\"return\",\"arity\":\"statement\",\"first\":{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":\"t\",\"arity\":\"name\"},\"second\":{\"value\":\"std\",\"arity\":\"literal\"},\"third\":[]}}]}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"original_symbol\",\"arity\":\"name\"},\"second\":{\"value\":\"{\",\"arity\":\"unary\",\"first\":[{\"key\":\"nud\",\"value\":\"function\",\"arity\":\"function\",\"first\":[],\"second\":{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"error\",\"arity\":\"literal\"},\"third\":[{\"value\":\"Undefined.\",\"arity\":\"literal\"}]}},{\"key\":\"led\",\"value\":\"function\",\"arity\":\"function\",\"first\":[{\"value\":\"left\",\"arity\":\"name\"}],\"second\":{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"error\",\"arity\":\"literal\"},\"third\":[{\"value\":\"Missing operator.\",\"arity\":\"literal\"}]}}]}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"symbol\",\"arity\":\"name\"},\"second\":{\"value\":\"function\",\"arity\":\"function\",\"first\":[{\"value\":\"id\",\"arity\":\"name\"},{\"value\":\"bp\",\"arity\":\"name\"}],\"second\":[{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"s\",\"arity\":\"name\"},\"second\":{\"value\":\"[\",\"arity\":\"binary\",\"first\":{\"value\":\"symbol_table\",\"arity\":\"name\"},\"second\":{\"value\":\"id\",\"arity\":\"name\"}}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"bp\",\"arity\":\"name\"},\"second\":{\"value\":\"||\",\"arity\":\"binary\",\"first\":{\"value\":\"bp\",\"arity\":\"name\"},\"second\":{\"value\":0,\"arity\":\"literal\"}}},{\"value\":\"if\",\"arity\":\"statement\",\"first\":{\"value\":\"s\",\"arity\":\"name\"},\"second\":{\"value\":\"if\",\"arity\":\"statement\",\"first\":{\"value\":\">=\",\"arity\":\"binary\",\"first\":{\"value\":\"bp\",\"arity\":\"name\"},\"second\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"s\",\"arity\":\"name\"},\"second\":{\"value\":\"lbp\",\"arity\":\"literal\"}}},\"second\":{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"s\",\"arity\":\"name\"},\"second\":{\"value\":\"lbp\",\"arity\":\"literal\"}},\"second\":{\"value\":\"bp\",\"arity\":\"name\"}},\"third\":null},\"third\":[{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"s\",\"arity\":\"name\"},\"second\":{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":{},\"arity\":\"literal\"},\"second\":{\"value\":\"create\",\"arity\":\"literal\"},\"third\":[{\"value\":\"original_symbol\",\"arity\":\"name\"}]}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"s\",\"arity\":\"name\"},\"second\":{\"value\":\"id\",\"arity\":\"literal\"}},\"second\":{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"s\",\"arity\":\"name\"},\"second\":{\"value\":\"value\",\"arity\":\"literal\"}},\"second\":{\"value\":\"id\",\"arity\":\"name\"}}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"s\",\"arity\":\"name\"},\"second\":{\"value\":\"lbp\",\"arity\":\"literal\"}},\"second\":{\"value\":\"bp\",\"arity\":\"name\"}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"[\",\"arity\":\"binary\",\"first\":{\"value\":\"symbol_table\",\"arity\":\"name\"},\"second\":{\"value\":\"id\",\"arity\":\"name\"}},\"second\":{\"value\":\"s\",\"arity\":\"name\"}}]},{\"value\":\"return\",\"arity\":\"statement\",\"first\":{\"value\":\"s\",\"arity\":\"name\"}}]}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"constant\",\"arity\":\"name\"},\"second\":{\"value\":\"function\",\"arity\":\"function\",\"first\":[{\"value\":\"s\",\"arity\":\"name\"},{\"value\":\"v\",\"arity\":\"name\"}],\"second\":[{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"x\",\"arity\":\"name\"},\"second\":{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"symbol\",\"arity\":\"name\"},\"second\":[{\"value\":\"s\",\"arity\":\"name\"}]}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"x\",\"arity\":\"name\"},\"second\":{\"value\":\"nud\",\"arity\":\"literal\"}},\"second\":{\"value\":\"function\",\"arity\":\"function\",\"first\":[],\"second\":[{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":\"scope\",\"arity\":\"name\"},\"second\":{\"value\":\"reserve\",\"arity\":\"literal\"},\"third\":[{\"value\":\"this\",\"arity\":\"this\"}]},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"value\",\"arity\":\"literal\"}},\"second\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"[\",\"arity\":\"binary\",\"first\":{\"value\":\"symbol_table\",\"arity\":\"name\"},\"second\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"id\",\"arity\":\"literal\"}}},\"second\":{\"value\":\"value\",\"arity\":\"literal\"}}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"arity\",\"arity\":\"literal\"}},\"second\":{\"value\":\"literal\",\"arity\":\"literal\"}},{\"value\":\"return\",\"arity\":\"statement\",\"first\":{\"value\":\"this\",\"arity\":\"this\"}}]}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"x\",\"arity\":\"name\"},\"second\":{\"value\":\"value\",\"arity\":\"literal\"}},\"second\":{\"value\":\"v\",\"arity\":\"name\"}},{\"value\":\"return\",\"arity\":\"statement\",\"first\":{\"value\":\"x\",\"arity\":\"name\"}}]}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"infix\",\"arity\":\"name\"},\"second\":{\"value\":\"function\",\"arity\":\"function\",\"first\":[{\"value\":\"id\",\"arity\":\"name\"},{\"value\":\"bp\",\"arity\":\"name\"},{\"value\":\"led\",\"arity\":\"name\"}],\"second\":[{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"s\",\"arity\":\"name\"},\"second\":{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"symbol\",\"arity\":\"name\"},\"second\":[{\"value\":\"id\",\"arity\":\"name\"},{\"value\":\"bp\",\"arity\":\"name\"}]}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"s\",\"arity\":\"name\"},\"second\":{\"value\":\"led\",\"arity\":\"literal\"}},\"second\":{\"value\":\"||\",\"arity\":\"binary\",\"first\":{\"value\":\"led\",\"arity\":\"name\"},\"second\":{\"value\":\"function\",\"arity\":\"function\",\"first\":[{\"value\":\"left\",\"arity\":\"name\"}],\"second\":[{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"first\",\"arity\":\"literal\"}},\"second\":{\"value\":\"left\",\"arity\":\"name\"}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"second\",\"arity\":\"literal\"}},\"second\":{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"expression\",\"arity\":\"name\"},\"second\":[{\"value\":\"bp\",\"arity\":\"name\"}]}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"arity\",\"arity\":\"literal\"}},\"second\":{\"value\":\"binary\",\"arity\":\"literal\"}},{\"value\":\"return\",\"arity\":\"statement\",\"first\":{\"value\":\"this\",\"arity\":\"this\"}}]}}},{\"value\":\"return\",\"arity\":\"statement\",\"first\":{\"value\":\"s\",\"arity\":\"name\"}}]}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"infixr\",\"arity\":\"name\"},\"second\":{\"value\":\"function\",\"arity\":\"function\",\"first\":[{\"value\":\"id\",\"arity\":\"name\"},{\"value\":\"bp\",\"arity\":\"name\"},{\"value\":\"led\",\"arity\":\"name\"}],\"second\":[{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"s\",\"arity\":\"name\"},\"second\":{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"symbol\",\"arity\":\"name\"},\"second\":[{\"value\":\"id\",\"arity\":\"name\"},{\"value\":\"bp\",\"arity\":\"name\"}]}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"s\",\"arity\":\"name\"},\"second\":{\"value\":\"led\",\"arity\":\"literal\"}},\"second\":{\"value\":\"||\",\"arity\":\"binary\",\"first\":{\"value\":\"led\",\"arity\":\"name\"},\"second\":{\"value\":\"function\",\"arity\":\"function\",\"first\":[{\"value\":\"left\",\"arity\":\"name\"}],\"second\":[{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"first\",\"arity\":\"literal\"}},\"second\":{\"value\":\"left\",\"arity\":\"name\"}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"second\",\"arity\":\"literal\"}},\"second\":{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"expression\",\"arity\":\"name\"},\"second\":[{\"value\":\"-\",\"arity\":\"binary\",\"first\":{\"value\":\"bp\",\"arity\":\"name\"},\"second\":{\"value\":1,\"arity\":\"literal\"}}]}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"arity\",\"arity\":\"literal\"}},\"second\":{\"value\":\"binary\",\"arity\":\"literal\"}},{\"value\":\"return\",\"arity\":\"statement\",\"first\":{\"value\":\"this\",\"arity\":\"this\"}}]}}},{\"value\":\"return\",\"arity\":\"statement\",\"first\":{\"value\":\"s\",\"arity\":\"name\"}}]}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"assignment\",\"arity\":\"name\"},\"second\":{\"value\":\"function\",\"arity\":\"function\",\"first\":[{\"value\":\"id\",\"arity\":\"name\"}],\"second\":{\"value\":\"return\",\"arity\":\"statement\",\"first\":{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"infixr\",\"arity\":\"name\"},\"second\":[{\"value\":\"id\",\"arity\":\"name\"},{\"value\":10,\"arity\":\"literal\"},{\"value\":\"function\",\"arity\":\"function\",\"first\":[{\"value\":\"left\",\"arity\":\"name\"}],\"second\":[{\"value\":\"if\",\"arity\":\"statement\",\"first\":{\"value\":\"&&\",\"arity\":\"binary\",\"first\":{\"value\":\"!==\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"left\",\"arity\":\"name\"},\"second\":{\"value\":\"id\",\"arity\":\"literal\"}},\"second\":{\"value\":\".\",\"arity\":\"literal\"}},\"second\":{\"value\":\"&&\",\"arity\":\"binary\",\"first\":{\"value\":\"!==\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"left\",\"arity\":\"name\"},\"second\":{\"value\":\"id\",\"arity\":\"literal\"}},\"second\":{\"value\":\"[\",\"arity\":\"literal\"}},\"second\":{\"value\":\"!==\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"left\",\"arity\":\"name\"},\"second\":{\"value\":\"arity\",\"arity\":\"literal\"}},\"second\":{\"value\":\"name\",\"arity\":\"literal\"}}}},\"second\":{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":\"left\",\"arity\":\"name\"},\"second\":{\"value\":\"error\",\"arity\":\"literal\"},\"third\":[{\"value\":\"Bad lvalue.\",\"arity\":\"literal\"}]},\"third\":null},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"first\",\"arity\":\"literal\"}},\"second\":{\"value\":\"left\",\"arity\":\"name\"}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"second\",\"arity\":\"literal\"}},\"second\":{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"expression\",\"arity\":\"name\"},\"second\":[{\"value\":9,\"arity\":\"literal\"}]}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"assignment\",\"arity\":\"literal\"}},\"second\":{\"value\":true,\"arity\":\"literal\"}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"arity\",\"arity\":\"literal\"}},\"second\":{\"value\":\"binary\",\"arity\":\"literal\"}},{\"value\":\"return\",\"arity\":\"statement\",\"first\":{\"value\":\"this\",\"arity\":\"this\"}}]}]}}}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"prefix\",\"arity\":\"name\"},\"second\":{\"value\":\"function\",\"arity\":\"function\",\"first\":[{\"value\":\"id\",\"arity\":\"name\"},{\"value\":\"nud\",\"arity\":\"name\"}],\"second\":[{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"s\",\"arity\":\"name\"},\"second\":{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"symbol\",\"arity\":\"name\"},\"second\":[{\"value\":\"id\",\"arity\":\"name\"}]}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"s\",\"arity\":\"name\"},\"second\":{\"value\":\"nud\",\"arity\":\"literal\"}},\"second\":{\"value\":\"||\",\"arity\":\"binary\",\"first\":{\"value\":\"nud\",\"arity\":\"name\"},\"second\":{\"value\":\"function\",\"arity\":\"function\",\"first\":[],\"second\":[{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":\"scope\",\"arity\":\"name\"},\"second\":{\"value\":\"reserve\",\"arity\":\"literal\"},\"third\":[{\"value\":\"this\",\"arity\":\"this\"}]},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"first\",\"arity\":\"literal\"}},\"second\":{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"expression\",\"arity\":\"name\"},\"second\":[{\"value\":70,\"arity\":\"literal\"}]}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"arity\",\"arity\":\"literal\"}},\"second\":{\"value\":\"unary\",\"arity\":\"literal\"}},{\"value\":\"return\",\"arity\":\"statement\",\"first\":{\"value\":\"this\",\"arity\":\"this\"}}]}}},{\"value\":\"return\",\"arity\":\"statement\",\"first\":{\"value\":\"s\",\"arity\":\"name\"}}]}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"stmt\",\"arity\":\"name\"},\"second\":{\"value\":\"function\",\"arity\":\"function\",\"first\":[{\"value\":\"s\",\"arity\":\"name\"},{\"value\":\"f\",\"arity\":\"name\"}],\"second\":[{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"x\",\"arity\":\"name\"},\"second\":{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"symbol\",\"arity\":\"name\"},\"second\":[{\"value\":\"s\",\"arity\":\"name\"}]}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"x\",\"arity\":\"name\"},\"second\":{\"value\":\"std\",\"arity\":\"literal\"}},\"second\":{\"value\":\"f\",\"arity\":\"name\"}},{\"value\":\"return\",\"arity\":\"statement\",\"first\":{\"value\":\"x\",\"arity\":\"name\"}}]}},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"symbol\",\"arity\":\"name\"},\"second\":[{\"value\":\"(end)\",\"arity\":\"literal\"}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"symbol\",\"arity\":\"name\"},\"second\":[{\"value\":\"(name)\",\"arity\":\"literal\"}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"symbol\",\"arity\":\"name\"},\"second\":[{\"value\":\":\",\"arity\":\"literal\"}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"symbol\",\"arity\":\"name\"},\"second\":[{\"value\":\";\",\"arity\":\"literal\"}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"symbol\",\"arity\":\"name\"},\"second\":[{\"value\":\")\",\"arity\":\"literal\"}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"symbol\",\"arity\":\"name\"},\"second\":[{\"value\":\"]\",\"arity\":\"literal\"}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"symbol\",\"arity\":\"name\"},\"second\":[{\"value\":\"}\",\"arity\":\"literal\"}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"symbol\",\"arity\":\"name\"},\"second\":[{\"value\":\",\",\"arity\":\"literal\"}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"symbol\",\"arity\":\"name\"},\"second\":[{\"value\":\"else\",\"arity\":\"literal\"}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"constant\",\"arity\":\"name\"},\"second\":[{\"value\":\"true\",\"arity\":\"literal\"},{\"value\":true,\"arity\":\"literal\"}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"constant\",\"arity\":\"name\"},\"second\":[{\"value\":\"false\",\"arity\":\"literal\"},{\"value\":false,\"arity\":\"literal\"}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"constant\",\"arity\":\"name\"},\"second\":[{\"value\":\"null\",\"arity\":\"literal\"},{\"value\":null,\"arity\":\"literal\"}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"constant\",\"arity\":\"name\"},\"second\":[{\"value\":\"pi\",\"arity\":\"literal\"},{\"value\":3.141592653589793,\"arity\":\"literal\"}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"constant\",\"arity\":\"name\"},\"second\":[{\"value\":\"Object\",\"arity\":\"literal\"},{\"value\":\"{\",\"arity\":\"unary\",\"first\":[]}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"constant\",\"arity\":\"name\"},\"second\":[{\"value\":\"Array\",\"arity\":\"literal\"},{\"value\":\"[\",\"arity\":\"unary\",\"first\":[]}]},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"symbol\",\"arity\":\"name\"},\"second\":[{\"value\":\"(literal)\",\"arity\":\"literal\"}]},\"second\":{\"value\":\"nud\",\"arity\":\"literal\"}},\"second\":{\"value\":\"itself\",\"arity\":\"name\"}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"symbol\",\"arity\":\"name\"},\"second\":[{\"value\":\"this\",\"arity\":\"literal\"}]},\"second\":{\"value\":\"nud\",\"arity\":\"literal\"}},\"second\":{\"value\":\"function\",\"arity\":\"function\",\"first\":[],\"second\":[{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":\"scope\",\"arity\":\"name\"},\"second\":{\"value\":\"reserve\",\"arity\":\"literal\"},\"third\":[{\"value\":\"this\",\"arity\":\"this\"}]},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"arity\",\"arity\":\"literal\"}},\"second\":{\"value\":\"this\",\"arity\":\"literal\"}},{\"value\":\"return\",\"arity\":\"statement\",\"first\":{\"value\":\"this\",\"arity\":\"this\"}}]}},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"assignment\",\"arity\":\"name\"},\"second\":[{\"value\":\"=\",\"arity\":\"literal\"}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"assignment\",\"arity\":\"name\"},\"second\":[{\"value\":\"+=\",\"arity\":\"literal\"}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"assignment\",\"arity\":\"name\"},\"second\":[{\"value\":\"-=\",\"arity\":\"literal\"}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"infix\",\"arity\":\"name\"},\"second\":[{\"value\":\"?\",\"arity\":\"literal\"},{\"value\":20,\"arity\":\"literal\"},{\"value\":\"function\",\"arity\":\"function\",\"first\":[{\"value\":\"left\",\"arity\":\"name\"}],\"second\":[{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"first\",\"arity\":\"literal\"}},\"second\":{\"value\":\"left\",\"arity\":\"name\"}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"second\",\"arity\":\"literal\"}},\"second\":{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"expression\",\"arity\":\"name\"},\"second\":[{\"value\":0,\"arity\":\"literal\"}]}},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"advance\",\"arity\":\"name\"},\"second\":[{\"value\":\":\",\"arity\":\"literal\"}]},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"third\",\"arity\":\"literal\"}},\"second\":{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"expression\",\"arity\":\"name\"},\"second\":[{\"value\":0,\"arity\":\"literal\"}]}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"arity\",\"arity\":\"literal\"}},\"second\":{\"value\":\"ternary\",\"arity\":\"literal\"}},{\"value\":\"return\",\"arity\":\"statement\",\"first\":{\"value\":\"this\",\"arity\":\"this\"}}]}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"infixr\",\"arity\":\"name\"},\"second\":[{\"value\":\"&&\",\"arity\":\"literal\"},{\"value\":30,\"arity\":\"literal\"}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"infixr\",\"arity\":\"name\"},\"second\":[{\"value\":\"||\",\"arity\":\"literal\"},{\"value\":30,\"arity\":\"literal\"}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"infixr\",\"arity\":\"name\"},\"second\":[{\"value\":\"===\",\"arity\":\"literal\"},{\"value\":40,\"arity\":\"literal\"}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"infixr\",\"arity\":\"name\"},\"second\":[{\"value\":\"!==\",\"arity\":\"literal\"},{\"value\":40,\"arity\":\"literal\"}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"infixr\",\"arity\":\"name\"},\"second\":[{\"value\":\"<\",\"arity\":\"literal\"},{\"value\":40,\"arity\":\"literal\"}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"infixr\",\"arity\":\"name\"},\"second\":[{\"value\":\"<=\",\"arity\":\"literal\"},{\"value\":40,\"arity\":\"literal\"}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"infixr\",\"arity\":\"name\"},\"second\":[{\"value\":\">\",\"arity\":\"literal\"},{\"value\":40,\"arity\":\"literal\"}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"infixr\",\"arity\":\"name\"},\"second\":[{\"value\":\">=\",\"arity\":\"literal\"},{\"value\":40,\"arity\":\"literal\"}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"infix\",\"arity\":\"name\"},\"second\":[{\"value\":\"+\",\"arity\":\"literal\"},{\"value\":50,\"arity\":\"literal\"}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"infix\",\"arity\":\"name\"},\"second\":[{\"value\":\"-\",\"arity\":\"literal\"},{\"value\":50,\"arity\":\"literal\"}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"infix\",\"arity\":\"name\"},\"second\":[{\"value\":\"*\",\"arity\":\"literal\"},{\"value\":60,\"arity\":\"literal\"}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"infix\",\"arity\":\"name\"},\"second\":[{\"value\":\"/\",\"arity\":\"literal\"},{\"value\":60,\"arity\":\"literal\"}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"infix\",\"arity\":\"name\"},\"second\":[{\"value\":\".\",\"arity\":\"literal\"},{\"value\":80,\"arity\":\"literal\"},{\"value\":\"function\",\"arity\":\"function\",\"first\":[{\"value\":\"left\",\"arity\":\"name\"}],\"second\":[{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"first\",\"arity\":\"literal\"}},\"second\":{\"value\":\"left\",\"arity\":\"name\"}},{\"value\":\"if\",\"arity\":\"statement\",\"first\":{\"value\":\"!==\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"token\",\"arity\":\"name\"},\"second\":{\"value\":\"arity\",\"arity\":\"literal\"}},\"second\":{\"value\":\"name\",\"arity\":\"literal\"}},\"second\":{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":\"token\",\"arity\":\"name\"},\"second\":{\"value\":\"error\",\"arity\":\"literal\"},\"third\":[{\"value\":\"Expected a property name.\",\"arity\":\"literal\"}]},\"third\":null},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"token\",\"arity\":\"name\"},\"second\":{\"value\":\"arity\",\"arity\":\"literal\"}},\"second\":{\"value\":\"literal\",\"arity\":\"literal\"}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"second\",\"arity\":\"literal\"}},\"second\":{\"value\":\"token\",\"arity\":\"name\"}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"arity\",\"arity\":\"literal\"}},\"second\":{\"value\":\"binary\",\"arity\":\"literal\"}},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"advance\",\"arity\":\"name\"},\"second\":[]},{\"value\":\"return\",\"arity\":\"statement\",\"first\":{\"value\":\"this\",\"arity\":\"this\"}}]}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"infix\",\"arity\":\"name\"},\"second\":[{\"value\":\"[\",\"arity\":\"literal\"},{\"value\":80,\"arity\":\"literal\"},{\"value\":\"function\",\"arity\":\"function\",\"first\":[{\"value\":\"left\",\"arity\":\"name\"}],\"second\":[{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"first\",\"arity\":\"literal\"}},\"second\":{\"value\":\"left\",\"arity\":\"name\"}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"second\",\"arity\":\"literal\"}},\"second\":{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"expression\",\"arity\":\"name\"},\"second\":[{\"value\":0,\"arity\":\"literal\"}]}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"arity\",\"arity\":\"literal\"}},\"second\":{\"value\":\"binary\",\"arity\":\"literal\"}},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"advance\",\"arity\":\"name\"},\"second\":[{\"value\":\"]\",\"arity\":\"literal\"}]},{\"value\":\"return\",\"arity\":\"statement\",\"first\":{\"value\":\"this\",\"arity\":\"this\"}}]}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"infix\",\"arity\":\"name\"},\"second\":[{\"value\":\"(\",\"arity\":\"literal\"},{\"value\":80,\"arity\":\"literal\"},{\"value\":\"function\",\"arity\":\"function\",\"first\":[{\"value\":\"left\",\"arity\":\"name\"}],\"second\":[{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"a\",\"arity\":\"name\"},\"second\":{\"value\":\"[\",\"arity\":\"unary\",\"first\":[]}},{\"value\":\"if\",\"arity\":\"statement\",\"first\":{\"value\":\"||\",\"arity\":\"binary\",\"first\":{\"value\":\"===\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"left\",\"arity\":\"name\"},\"second\":{\"value\":\"id\",\"arity\":\"literal\"}},\"second\":{\"value\":\".\",\"arity\":\"literal\"}},\"second\":{\"value\":\"===\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"left\",\"arity\":\"name\"},\"second\":{\"value\":\"id\",\"arity\":\"literal\"}},\"second\":{\"value\":\"[\",\"arity\":\"literal\"}}},\"second\":[{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"arity\",\"arity\":\"literal\"}},\"second\":{\"value\":\"ternary\",\"arity\":\"literal\"}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"first\",\"arity\":\"literal\"}},\"second\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"left\",\"arity\":\"name\"},\"second\":{\"value\":\"first\",\"arity\":\"literal\"}}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"second\",\"arity\":\"literal\"}},\"second\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"left\",\"arity\":\"name\"},\"second\":{\"value\":\"second\",\"arity\":\"literal\"}}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"third\",\"arity\":\"literal\"}},\"second\":{\"value\":\"a\",\"arity\":\"name\"}}],\"third\":[{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"arity\",\"arity\":\"literal\"}},\"second\":{\"value\":\"binary\",\"arity\":\"literal\"}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"first\",\"arity\":\"literal\"}},\"second\":{\"value\":\"left\",\"arity\":\"name\"}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"second\",\"arity\":\"literal\"}},\"second\":{\"value\":\"a\",\"arity\":\"name\"}},{\"value\":\"if\",\"arity\":\"statement\",\"first\":{\"value\":\"&&\",\"arity\":\"binary\",\"first\":{\"value\":\"||\",\"arity\":\"binary\",\"first\":{\"value\":\"!==\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"left\",\"arity\":\"name\"},\"second\":{\"value\":\"arity\",\"arity\":\"literal\"}},\"second\":{\"value\":\"unary\",\"arity\":\"literal\"}},\"second\":{\"value\":\"!==\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"left\",\"arity\":\"name\"},\"second\":{\"value\":\"id\",\"arity\":\"literal\"}},\"second\":{\"value\":\"function\",\"arity\":\"literal\"}}},\"second\":{\"value\":\"&&\",\"arity\":\"binary\",\"first\":{\"value\":\"!==\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"left\",\"arity\":\"name\"},\"second\":{\"value\":\"arity\",\"arity\":\"literal\"}},\"second\":{\"value\":\"name\",\"arity\":\"literal\"}},\"second\":{\"value\":\"&&\",\"arity\":\"binary\",\"first\":{\"value\":\"!==\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"left\",\"arity\":\"name\"},\"second\":{\"value\":\"id\",\"arity\":\"literal\"}},\"second\":{\"value\":\"(\",\"arity\":\"literal\"}},\"second\":{\"value\":\"&&\",\"arity\":\"binary\",\"first\":{\"value\":\"!==\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"left\",\"arity\":\"name\"},\"second\":{\"value\":\"id\",\"arity\":\"literal\"}},\"second\":{\"value\":\"&&\",\"arity\":\"literal\"}},\"second\":{\"value\":\"&&\",\"arity\":\"binary\",\"first\":{\"value\":\"!==\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"left\",\"arity\":\"name\"},\"second\":{\"value\":\"id\",\"arity\":\"literal\"}},\"second\":{\"value\":\"||\",\"arity\":\"literal\"}},\"second\":{\"value\":\"!==\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"left\",\"arity\":\"name\"},\"second\":{\"value\":\"id\",\"arity\":\"literal\"}},\"second\":{\"value\":\"?\",\"arity\":\"literal\"}}}}}}},\"second\":{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":\"left\",\"arity\":\"name\"},\"second\":{\"value\":\"error\",\"arity\":\"literal\"},\"third\":[{\"value\":\"Expected a variable name.\",\"arity\":\"literal\"}]},\"third\":null}]},{\"value\":\"if\",\"arity\":\"statement\",\"first\":{\"value\":\"!==\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"token\",\"arity\":\"name\"},\"second\":{\"value\":\"id\",\"arity\":\"literal\"}},\"second\":{\"value\":\")\",\"arity\":\"literal\"}},\"second\":{\"value\":\"while\",\"arity\":\"statement\",\"first\":{\"value\":true,\"arity\":\"literal\"},\"second\":[{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":\"a\",\"arity\":\"name\"},\"second\":{\"value\":\"push\",\"arity\":\"literal\"},\"third\":[{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"expression\",\"arity\":\"name\"},\"second\":[{\"value\":0,\"arity\":\"literal\"}]}]},{\"value\":\"if\",\"arity\":\"statement\",\"first\":{\"value\":\"!==\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"token\",\"arity\":\"name\"},\"second\":{\"value\":\"id\",\"arity\":\"literal\"}},\"second\":{\"value\":\",\",\"arity\":\"literal\"}},\"second\":{\"value\":\"break\",\"arity\":\"statement\"},\"third\":null},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"advance\",\"arity\":\"name\"},\"second\":[{\"value\":\",\",\"arity\":\"literal\"}]}]},\"third\":null},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"advance\",\"arity\":\"name\"},\"second\":[{\"value\":\")\",\"arity\":\"literal\"}]},{\"value\":\"return\",\"arity\":\"statement\",\"first\":{\"value\":\"this\",\"arity\":\"this\"}}]}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"prefix\",\"arity\":\"name\"},\"second\":[{\"value\":\"!\",\"arity\":\"literal\"}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"prefix\",\"arity\":\"name\"},\"second\":[{\"value\":\"-\",\"arity\":\"literal\"}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"prefix\",\"arity\":\"name\"},\"second\":[{\"value\":\"typeof\",\"arity\":\"literal\"}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"prefix\",\"arity\":\"name\"},\"second\":[{\"value\":\"(\",\"arity\":\"literal\"},{\"value\":\"function\",\"arity\":\"function\",\"first\":[],\"second\":[{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"e\",\"arity\":\"name\"},\"second\":{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"expression\",\"arity\":\"name\"},\"second\":[{\"value\":0,\"arity\":\"literal\"}]}},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"advance\",\"arity\":\"name\"},\"second\":[{\"value\":\")\",\"arity\":\"literal\"}]},{\"value\":\"return\",\"arity\":\"statement\",\"first\":{\"value\":\"e\",\"arity\":\"name\"}}]}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"prefix\",\"arity\":\"name\"},\"second\":[{\"value\":\"function\",\"arity\":\"literal\"},{\"value\":\"function\",\"arity\":\"function\",\"first\":[],\"second\":[{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"a\",\"arity\":\"name\"},\"second\":{\"value\":\"[\",\"arity\":\"unary\",\"first\":[]}},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"new_scope\",\"arity\":\"name\"},\"second\":[]},{\"value\":\"if\",\"arity\":\"statement\",\"first\":{\"value\":\"===\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"token\",\"arity\":\"name\"},\"second\":{\"value\":\"arity\",\"arity\":\"literal\"}},\"second\":{\"value\":\"name\",\"arity\":\"literal\"}},\"second\":[{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":\"scope\",\"arity\":\"name\"},\"second\":{\"value\":\"define\",\"arity\":\"literal\"},\"third\":[{\"value\":\"token\",\"arity\":\"name\"}]},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"name\",\"arity\":\"literal\"}},\"second\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"token\",\"arity\":\"name\"},\"second\":{\"value\":\"value\",\"arity\":\"literal\"}}},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"advance\",\"arity\":\"name\"},\"second\":[]}],\"third\":null},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"advance\",\"arity\":\"name\"},\"second\":[{\"value\":\"(\",\"arity\":\"literal\"}]},{\"value\":\"if\",\"arity\":\"statement\",\"first\":{\"value\":\"!==\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"token\",\"arity\":\"name\"},\"second\":{\"value\":\"id\",\"arity\":\"literal\"}},\"second\":{\"value\":\")\",\"arity\":\"literal\"}},\"second\":{\"value\":\"while\",\"arity\":\"statement\",\"first\":{\"value\":true,\"arity\":\"literal\"},\"second\":[{\"value\":\"if\",\"arity\":\"statement\",\"first\":{\"value\":\"!==\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"token\",\"arity\":\"name\"},\"second\":{\"value\":\"arity\",\"arity\":\"literal\"}},\"second\":{\"value\":\"name\",\"arity\":\"literal\"}},\"second\":{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":\"token\",\"arity\":\"name\"},\"second\":{\"value\":\"error\",\"arity\":\"literal\"},\"third\":[{\"value\":\"Expected a parameter name.\",\"arity\":\"literal\"}]},\"third\":null},{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":\"scope\",\"arity\":\"name\"},\"second\":{\"value\":\"define\",\"arity\":\"literal\"},\"third\":[{\"value\":\"token\",\"arity\":\"name\"}]},{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":\"a\",\"arity\":\"name\"},\"second\":{\"value\":\"push\",\"arity\":\"literal\"},\"third\":[{\"value\":\"token\",\"arity\":\"name\"}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"advance\",\"arity\":\"name\"},\"second\":[]},{\"value\":\"if\",\"arity\":\"statement\",\"first\":{\"value\":\"!==\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"token\",\"arity\":\"name\"},\"second\":{\"value\":\"id\",\"arity\":\"literal\"}},\"second\":{\"value\":\",\",\"arity\":\"literal\"}},\"second\":{\"value\":\"break\",\"arity\":\"statement\"},\"third\":null},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"advance\",\"arity\":\"name\"},\"second\":[{\"value\":\",\",\"arity\":\"literal\"}]}]},\"third\":null},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"first\",\"arity\":\"literal\"}},\"second\":{\"value\":\"a\",\"arity\":\"name\"}},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"advance\",\"arity\":\"name\"},\"second\":[{\"value\":\")\",\"arity\":\"literal\"}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"advance\",\"arity\":\"name\"},\"second\":[{\"value\":\"{\",\"arity\":\"literal\"}]},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"second\",\"arity\":\"literal\"}},\"second\":{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"statements\",\"arity\":\"name\"},\"second\":[]}},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"advance\",\"arity\":\"name\"},\"second\":[{\"value\":\"}\",\"arity\":\"literal\"}]},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"arity\",\"arity\":\"literal\"}},\"second\":{\"value\":\"function\",\"arity\":\"literal\"}},{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":\"scope\",\"arity\":\"name\"},\"second\":{\"value\":\"pop\",\"arity\":\"literal\"},\"third\":[]},{\"value\":\"return\",\"arity\":\"statement\",\"first\":{\"value\":\"this\",\"arity\":\"this\"}}]}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"prefix\",\"arity\":\"name\"},\"second\":[{\"value\":\"[\",\"arity\":\"literal\"},{\"value\":\"function\",\"arity\":\"function\",\"first\":[],\"second\":[{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"a\",\"arity\":\"name\"},\"second\":{\"value\":\"[\",\"arity\":\"unary\",\"first\":[]}},{\"value\":\"if\",\"arity\":\"statement\",\"first\":{\"value\":\"!==\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"token\",\"arity\":\"name\"},\"second\":{\"value\":\"id\",\"arity\":\"literal\"}},\"second\":{\"value\":\"]\",\"arity\":\"literal\"}},\"second\":{\"value\":\"while\",\"arity\":\"statement\",\"first\":{\"value\":true,\"arity\":\"literal\"},\"second\":[{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":\"a\",\"arity\":\"name\"},\"second\":{\"value\":\"push\",\"arity\":\"literal\"},\"third\":[{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"expression\",\"arity\":\"name\"},\"second\":[{\"value\":0,\"arity\":\"literal\"}]}]},{\"value\":\"if\",\"arity\":\"statement\",\"first\":{\"value\":\"!==\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"token\",\"arity\":\"name\"},\"second\":{\"value\":\"id\",\"arity\":\"literal\"}},\"second\":{\"value\":\",\",\"arity\":\"literal\"}},\"second\":{\"value\":\"break\",\"arity\":\"statement\"},\"third\":null},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"advance\",\"arity\":\"name\"},\"second\":[{\"value\":\",\",\"arity\":\"literal\"}]}]},\"third\":null},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"advance\",\"arity\":\"name\"},\"second\":[{\"value\":\"]\",\"arity\":\"literal\"}]},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"first\",\"arity\":\"literal\"}},\"second\":{\"value\":\"a\",\"arity\":\"name\"}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"arity\",\"arity\":\"literal\"}},\"second\":{\"value\":\"unary\",\"arity\":\"literal\"}},{\"value\":\"return\",\"arity\":\"statement\",\"first\":{\"value\":\"this\",\"arity\":\"this\"}}]}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"prefix\",\"arity\":\"name\"},\"second\":[{\"value\":\"{\",\"arity\":\"literal\"},{\"value\":\"function\",\"arity\":\"function\",\"first\":[],\"second\":[{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"a\",\"arity\":\"name\"},\"second\":{\"value\":\"[\",\"arity\":\"unary\",\"first\":[]}},{\"value\":\"if\",\"arity\":\"statement\",\"first\":{\"value\":\"!==\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"token\",\"arity\":\"name\"},\"second\":{\"value\":\"id\",\"arity\":\"literal\"}},\"second\":{\"value\":\"}\",\"arity\":\"literal\"}},\"second\":{\"value\":\"while\",\"arity\":\"statement\",\"first\":{\"value\":true,\"arity\":\"literal\"},\"second\":[{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"n\",\"arity\":\"name\"},\"second\":{\"value\":\"token\",\"arity\":\"name\"}},{\"value\":\"if\",\"arity\":\"statement\",\"first\":{\"value\":\"&&\",\"arity\":\"binary\",\"first\":{\"value\":\"!==\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"n\",\"arity\":\"name\"},\"second\":{\"value\":\"arity\",\"arity\":\"literal\"}},\"second\":{\"value\":\"name\",\"arity\":\"literal\"}},\"second\":{\"value\":\"!==\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"n\",\"arity\":\"name\"},\"second\":{\"value\":\"arity\",\"arity\":\"literal\"}},\"second\":{\"value\":\"literal\",\"arity\":\"literal\"}}},\"second\":{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":\"token\",\"arity\":\"name\"},\"second\":{\"value\":\"error\",\"arity\":\"literal\"},\"third\":[{\"value\":\"Bad property name.\",\"arity\":\"literal\"}]},\"third\":null},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"advance\",\"arity\":\"name\"},\"second\":[]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"advance\",\"arity\":\"name\"},\"second\":[{\"value\":\":\",\"arity\":\"literal\"}]},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"v\",\"arity\":\"name\"},\"second\":{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"expression\",\"arity\":\"name\"},\"second\":[{\"value\":0,\"arity\":\"literal\"}]}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"v\",\"arity\":\"name\"},\"second\":{\"value\":\"key\",\"arity\":\"literal\"}},\"second\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"n\",\"arity\":\"name\"},\"second\":{\"value\":\"value\",\"arity\":\"literal\"}}},{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":\"a\",\"arity\":\"name\"},\"second\":{\"value\":\"push\",\"arity\":\"literal\"},\"third\":[{\"value\":\"v\",\"arity\":\"name\"}]},{\"value\":\"if\",\"arity\":\"statement\",\"first\":{\"value\":\"!==\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"token\",\"arity\":\"name\"},\"second\":{\"value\":\"id\",\"arity\":\"literal\"}},\"second\":{\"value\":\",\",\"arity\":\"literal\"}},\"second\":{\"value\":\"break\",\"arity\":\"statement\"},\"third\":null},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"advance\",\"arity\":\"name\"},\"second\":[{\"value\":\",\",\"arity\":\"literal\"}]}]},\"third\":null},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"advance\",\"arity\":\"name\"},\"second\":[{\"value\":\"}\",\"arity\":\"literal\"}]},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"first\",\"arity\":\"literal\"}},\"second\":{\"value\":\"a\",\"arity\":\"name\"}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"arity\",\"arity\":\"literal\"}},\"second\":{\"value\":\"unary\",\"arity\":\"literal\"}},{\"value\":\"return\",\"arity\":\"statement\",\"first\":{\"value\":\"this\",\"arity\":\"this\"}}]}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"stmt\",\"arity\":\"name\"},\"second\":[{\"value\":\"{\",\"arity\":\"literal\"},{\"value\":\"function\",\"arity\":\"function\",\"first\":[],\"second\":[{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"new_scope\",\"arity\":\"name\"},\"second\":[]},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"a\",\"arity\":\"name\"},\"second\":{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"statements\",\"arity\":\"name\"},\"second\":[]}},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"advance\",\"arity\":\"name\"},\"second\":[{\"value\":\"}\",\"arity\":\"literal\"}]},{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":\"scope\",\"arity\":\"name\"},\"second\":{\"value\":\"pop\",\"arity\":\"literal\"},\"third\":[]},{\"value\":\"return\",\"arity\":\"statement\",\"first\":{\"value\":\"a\",\"arity\":\"name\"}}]}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"stmt\",\"arity\":\"name\"},\"second\":[{\"value\":\"var\",\"arity\":\"literal\"},{\"value\":\"function\",\"arity\":\"function\",\"first\":[],\"second\":[{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"a\",\"arity\":\"name\"},\"second\":{\"value\":\"[\",\"arity\":\"unary\",\"first\":[]}},{\"value\":\"while\",\"arity\":\"statement\",\"first\":{\"value\":true,\"arity\":\"literal\"},\"second\":[{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"n\",\"arity\":\"name\"},\"second\":{\"value\":\"token\",\"arity\":\"name\"}},{\"value\":\"if\",\"arity\":\"statement\",\"first\":{\"value\":\"!==\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"n\",\"arity\":\"name\"},\"second\":{\"value\":\"arity\",\"arity\":\"literal\"}},\"second\":{\"value\":\"name\",\"arity\":\"literal\"}},\"second\":{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":\"n\",\"arity\":\"name\"},\"second\":{\"value\":\"error\",\"arity\":\"literal\"},\"third\":[{\"value\":\"Expected a new variable name.\",\"arity\":\"literal\"}]},\"third\":null},{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":\"scope\",\"arity\":\"name\"},\"second\":{\"value\":\"define\",\"arity\":\"literal\"},\"third\":[{\"value\":\"n\",\"arity\":\"name\"}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"advance\",\"arity\":\"name\"},\"second\":[]},{\"value\":\"if\",\"arity\":\"statement\",\"first\":{\"value\":\"===\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"token\",\"arity\":\"name\"},\"second\":{\"value\":\"id\",\"arity\":\"literal\"}},\"second\":{\"value\":\"=\",\"arity\":\"literal\"}},\"second\":[{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"t\",\"arity\":\"name\"},\"second\":{\"value\":\"token\",\"arity\":\"name\"}},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"advance\",\"arity\":\"name\"},\"second\":[{\"value\":\"=\",\"arity\":\"literal\"}]},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"t\",\"arity\":\"name\"},\"second\":{\"value\":\"first\",\"arity\":\"literal\"}},\"second\":{\"value\":\"n\",\"arity\":\"name\"}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"t\",\"arity\":\"name\"},\"second\":{\"value\":\"second\",\"arity\":\"literal\"}},\"second\":{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"expression\",\"arity\":\"name\"},\"second\":[{\"value\":0,\"arity\":\"literal\"}]}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"t\",\"arity\":\"name\"},\"second\":{\"value\":\"arity\",\"arity\":\"literal\"}},\"second\":{\"value\":\"binary\",\"arity\":\"literal\"}},{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":\"a\",\"arity\":\"name\"},\"second\":{\"value\":\"push\",\"arity\":\"literal\"},\"third\":[{\"value\":\"t\",\"arity\":\"name\"}]}],\"third\":null},{\"value\":\"if\",\"arity\":\"statement\",\"first\":{\"value\":\"!==\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"token\",\"arity\":\"name\"},\"second\":{\"value\":\"id\",\"arity\":\"literal\"}},\"second\":{\"value\":\",\",\"arity\":\"literal\"}},\"second\":{\"value\":\"break\",\"arity\":\"statement\"},\"third\":null},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"advance\",\"arity\":\"name\"},\"second\":[{\"value\":\",\",\"arity\":\"literal\"}]}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"advance\",\"arity\":\"name\"},\"second\":[{\"value\":\";\",\"arity\":\"literal\"}]},{\"value\":\"return\",\"arity\":\"statement\",\"first\":{\"value\":\"?\",\"arity\":\"ternary\",\"first\":{\"value\":\"===\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"a\",\"arity\":\"name\"},\"second\":{\"value\":\"length\",\"arity\":\"literal\"}},\"second\":{\"value\":0,\"arity\":\"literal\"}},\"second\":{\"value\":null,\"arity\":\"literal\"},\"third\":{\"value\":\"?\",\"arity\":\"ternary\",\"first\":{\"value\":\"===\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"a\",\"arity\":\"name\"},\"second\":{\"value\":\"length\",\"arity\":\"literal\"}},\"second\":{\"value\":1,\"arity\":\"literal\"}},\"second\":{\"value\":\"[\",\"arity\":\"binary\",\"first\":{\"value\":\"a\",\"arity\":\"name\"},\"second\":{\"value\":0,\"arity\":\"literal\"}},\"third\":{\"value\":\"a\",\"arity\":\"name\"}}}}]}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"stmt\",\"arity\":\"name\"},\"second\":[{\"value\":\"if\",\"arity\":\"literal\"},{\"value\":\"function\",\"arity\":\"function\",\"first\":[],\"second\":[{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"advance\",\"arity\":\"name\"},\"second\":[{\"value\":\"(\",\"arity\":\"literal\"}]},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"first\",\"arity\":\"literal\"}},\"second\":{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"expression\",\"arity\":\"name\"},\"second\":[{\"value\":0,\"arity\":\"literal\"}]}},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"advance\",\"arity\":\"name\"},\"second\":[{\"value\":\")\",\"arity\":\"literal\"}]},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"second\",\"arity\":\"literal\"}},\"second\":{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"block\",\"arity\":\"name\"},\"second\":[]}},{\"value\":\"if\",\"arity\":\"statement\",\"first\":{\"value\":\"===\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"token\",\"arity\":\"name\"},\"second\":{\"value\":\"id\",\"arity\":\"literal\"}},\"second\":{\"value\":\"else\",\"arity\":\"literal\"}},\"second\":[{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":\"scope\",\"arity\":\"name\"},\"second\":{\"value\":\"reserve\",\"arity\":\"literal\"},\"third\":[{\"value\":\"token\",\"arity\":\"name\"}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"advance\",\"arity\":\"name\"},\"second\":[{\"value\":\"else\",\"arity\":\"literal\"}]},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"third\",\"arity\":\"literal\"}},\"second\":{\"value\":\"?\",\"arity\":\"ternary\",\"first\":{\"value\":\"===\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"token\",\"arity\":\"name\"},\"second\":{\"value\":\"id\",\"arity\":\"literal\"}},\"second\":{\"value\":\"if\",\"arity\":\"literal\"}},\"second\":{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"statement\",\"arity\":\"name\"},\"second\":[]},\"third\":{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"block\",\"arity\":\"name\"},\"second\":[]}}}],\"third\":{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"third\",\"arity\":\"literal\"}},\"second\":{\"value\":null,\"arity\":\"literal\"}}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"arity\",\"arity\":\"literal\"}},\"second\":{\"value\":\"statement\",\"arity\":\"literal\"}},{\"value\":\"return\",\"arity\":\"statement\",\"first\":{\"value\":\"this\",\"arity\":\"this\"}}]}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"stmt\",\"arity\":\"name\"},\"second\":[{\"value\":\"return\",\"arity\":\"literal\"},{\"value\":\"function\",\"arity\":\"function\",\"first\":[],\"second\":[{\"value\":\"if\",\"arity\":\"statement\",\"first\":{\"value\":\"!==\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"token\",\"arity\":\"name\"},\"second\":{\"value\":\"id\",\"arity\":\"literal\"}},\"second\":{\"value\":\";\",\"arity\":\"literal\"}},\"second\":{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"first\",\"arity\":\"literal\"}},\"second\":{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"expression\",\"arity\":\"name\"},\"second\":[{\"value\":0,\"arity\":\"literal\"}]}},\"third\":null},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"advance\",\"arity\":\"name\"},\"second\":[{\"value\":\";\",\"arity\":\"literal\"}]},{\"value\":\"if\",\"arity\":\"statement\",\"first\":{\"value\":\"!==\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"token\",\"arity\":\"name\"},\"second\":{\"value\":\"id\",\"arity\":\"literal\"}},\"second\":{\"value\":\"}\",\"arity\":\"literal\"}},\"second\":{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":\"token\",\"arity\":\"name\"},\"second\":{\"value\":\"error\",\"arity\":\"literal\"},\"third\":[{\"value\":\"Unreachable statement.\",\"arity\":\"literal\"}]},\"third\":null},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"arity\",\"arity\":\"literal\"}},\"second\":{\"value\":\"statement\",\"arity\":\"literal\"}},{\"value\":\"return\",\"arity\":\"statement\",\"first\":{\"value\":\"this\",\"arity\":\"this\"}}]}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"stmt\",\"arity\":\"name\"},\"second\":[{\"value\":\"break\",\"arity\":\"literal\"},{\"value\":\"function\",\"arity\":\"function\",\"first\":[],\"second\":[{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"advance\",\"arity\":\"name\"},\"second\":[{\"value\":\";\",\"arity\":\"literal\"}]},{\"value\":\"if\",\"arity\":\"statement\",\"first\":{\"value\":\"!==\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"token\",\"arity\":\"name\"},\"second\":{\"value\":\"id\",\"arity\":\"literal\"}},\"second\":{\"value\":\"}\",\"arity\":\"literal\"}},\"second\":{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":\"token\",\"arity\":\"name\"},\"second\":{\"value\":\"error\",\"arity\":\"literal\"},\"third\":[{\"value\":\"Unreachable statement.\",\"arity\":\"literal\"}]},\"third\":null},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"arity\",\"arity\":\"literal\"}},\"second\":{\"value\":\"statement\",\"arity\":\"literal\"}},{\"value\":\"return\",\"arity\":\"statement\",\"first\":{\"value\":\"this\",\"arity\":\"this\"}}]}]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"stmt\",\"arity\":\"name\"},\"second\":[{\"value\":\"while\",\"arity\":\"literal\"},{\"value\":\"function\",\"arity\":\"function\",\"first\":[],\"second\":[{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"advance\",\"arity\":\"name\"},\"second\":[{\"value\":\"(\",\"arity\":\"literal\"}]},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"first\",\"arity\":\"literal\"}},\"second\":{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"expression\",\"arity\":\"name\"},\"second\":[{\"value\":0,\"arity\":\"literal\"}]}},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"advance\",\"arity\":\"name\"},\"second\":[{\"value\":\")\",\"arity\":\"literal\"}]},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"second\",\"arity\":\"literal\"}},\"second\":{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"block\",\"arity\":\"name\"},\"second\":[]}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\".\",\"arity\":\"binary\",\"first\":{\"value\":\"this\",\"arity\":\"this\"},\"second\":{\"value\":\"arity\",\"arity\":\"literal\"}},\"second\":{\"value\":\"statement\",\"arity\":\"literal\"}},{\"value\":\"return\",\"arity\":\"statement\",\"first\":{\"value\":\"this\",\"arity\":\"this\"}}]}]},{\"value\":\"return\",\"arity\":\"statement\",\"first\":{\"value\":\"function\",\"arity\":\"function\",\"first\":[{\"value\":\"source\",\"arity\":\"name\"}],\"second\":[{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"tokens\",\"arity\":\"name\"},\"second\":{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":\"source\",\"arity\":\"name\"},\"second\":{\"value\":\"tokens\",\"arity\":\"literal\"},\"third\":[{\"value\":\"=<>!+-*&|/%^\",\"arity\":\"literal\"},{\"value\":\"=<>&|\",\"arity\":\"literal\"}]}},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"token_nr\",\"arity\":\"name\"},\"second\":{\"value\":0,\"arity\":\"literal\"}},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"new_scope\",\"arity\":\"name\"},\"second\":[]},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"advance\",\"arity\":\"name\"},\"second\":[]},{\"value\":\"=\",\"arity\":\"binary\",\"first\":{\"value\":\"s\",\"arity\":\"name\"},\"second\":{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"statements\",\"arity\":\"name\"},\"second\":[]}},{\"value\":\"(\",\"arity\":\"binary\",\"first\":{\"value\":\"advance\",\"arity\":\"name\"},\"second\":[{\"value\":\"(end)\",\"arity\":\"literal\"}]},{\"value\":\"(\",\"arity\":\"ternary\",\"first\":{\"value\":\"scope\",\"arity\":\"name\"},\"second\":{\"value\":\"pop\",\"arity\":\"literal\"},\"third\":[]},{\"value\":\"return\",\"arity\":\"statement\",\"first\":{\"value\":\"s\",\"arity\":\"name\"}}]}}]}}"
      ]
    )
    bin = BiDS.encode(with_attrs)
    {:ok, result} = BiDS.decode(bin)
    assert result == with_attrs
  end

  test "convert_error_response" do
    simple = BiDS.make_pkt(:request, :get)
    error = BiDS.set_error(simple, 403, "could not something or other")
    bin = BiDS.encode(error)
    {:ok, result} = BiDS.decode(bin)
    assert result == error
  end
end
